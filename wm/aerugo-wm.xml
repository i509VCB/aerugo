<?xml version="1.0" encoding="UTF-8"?>
<protocol name="aerugo_wm_v1">
    <copyright>
        TODO
    </copyright>

    <interface name="aerugo_wm_v1" version="1">
        <description>
            The aerugo_wm_v1 interface provides a way for an Aerugo based Wayland compositor to be controlled
            by a WM in the WM process.
        </description>

        <enum name="error">
            <entry name="unresponsive" value="0"
                   summary="the wm did not respond to a ping event in time"/>
        </enum>

        <request name="destroy" type="destructor">
            <description summary="destroy the aerugo_wm_v1 object">
                Destroys the aerugo_wm_v1 object.
            </description>
        </request>

        <event name="finished">
            <description>
                The server has decided the wm should be destroyed. When this event is sent, the global should
                be destroyed.

                This event is intended to allow for graceful wm shutdown. However if the wm is unresponsive,
                then the wm will be killed with the aerugo_wm_v1.error.unresponsive error.
            </description>
        </event>

        <request name="pong">
            <description>
                The WM must respond to a ping event with a pong request or
                the WM may be deemed unresponsive.

                See aerugo_wm_v1.ping and aerugo_wm_v1.error.unresponsive for more information.
            </description>
            <arg name="serial" type="uint" summary="serial of the ping event"/>
        </request>

        <event name "ping">
            <description>
                The ping event asks if the wm is still alive. The serial in this event must be passed back in
                the "pong" event in some amount of time to be kept alive.

                If the wm is unresponsive, the server may decide when the wm is considered dead and therefore
                disconnected.

                See aerugo_wm_v1.ping and aerugo_wm_v1.error.unresponsive for more information.
            </description>
            <arg name="serial" type="uint" summary="serial of the ping event"/>
        </event>
    </interface>

    <interface name="aerugo_wm_graph_v1" version="1">
        <description>
            This interface defines a scene graph used to describe the layout of surfaces.

            A scene graph also provides a mechanism for the server and wm to raycast into the surface
            heirarchy.
        </description>
    </interface>
</protocol>
